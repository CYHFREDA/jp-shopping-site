<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8" />
<title>Clevora å¾Œå°ç®¡ç†</title>
<script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link rel="stylesheet" href="css/admin.css" data-href="css/admin.css">
</head>
<body>
<div id="app">
  <!-- ğŸ”¹ å°è¦½åˆ— -->
  <nav class="navbar navbar-expand-lg navbar-light bg-warning border-bottom shadow-sm">
    <div class="container-fluid">
      <a class="navbar-brand fw-bold d-flex align-items-center" href="/">
        <img src="images/LOGO.png" alt="LOGO" class="me-2" />
        <span>Clevora é¦–é </span>
      </a>
      <div class="ms-auto" v-if="isLoggedIn">
        <span class="navbar-text text-light me-3">å¾Œå°ç®¡ç†ç³»çµ±</span>
        <button @click="logout" class="btn btn-danger btn-sm">ç™»å‡º</button>
      </div>
    </div>
  </nav>

  <!-- ğŸ”¹ ç™»å…¥ç•«é¢ -->
  <div v-if="!isLoggedIn" class="container mt-5">
    <div class="card p-4 text-center">
      <h4 class="card-title mb-3">å¾Œå°ç™»å…¥</h4>
      <p class="text-muted mb-4">è«‹è¼¸å…¥å¸³è™Ÿèˆ‡å¯†ç¢¼</p>
      <div class="mb-2">
        <input v-model="loginData.username" class="form-control form-control-lg" placeholder="Username">
      </div>
      <div class="mb-3">
        <input v-model="loginData.password" type="password" class="form-control form-control-lg" placeholder="Password">
      </div>
      <button @click="login" class="btn btn-primary btn-lg w-100">ç™»å…¥</button>
    </div>
  </div>

  <!-- ğŸ”¹ ä¸»ç•«é¢ -->
  <div v-else class="container mt-4">
    <h1>å¾Œå°ç®¡ç†ä¸»é  (ç¤ºç¯„ Vue ç®¡ç†)</h1>
    <!-- ä½ å¯ä»¥ç”¨ v-for ç­‰ï¼Œè®“ Vue å¹«ä½ ç”¢ç”Ÿè¨‚å–®/å•†å“æ¸…å–® -->
  </div>
</div>

<script>
const { createApp } = Vue;
createApp({
  data() {
    return {
      isLoggedIn: false,
      loginData: {
        username: '',
        password: ''
      }
    };
  },
  mounted() {
    const savedToken = localStorage.getItem("basic_token");
    const expireAt = localStorage.getItem("expire_at");
    if (savedToken && expireAt && Date.now() < parseInt(expireAt)) {
      this.isLoggedIn = true;
    }
  },
  methods: {
    async login() {
      if (!this.loginData.username || !this.loginData.password) {
        alert("è«‹è¼¸å…¥å¸³è™Ÿå¯†ç¢¼ï¼");
        return;
      }
      // ç›´æ¥ç”¨ base64 æ¸¬è©¦ (ç¤ºç¯„ï¼Œå¯¦éš›é‚„éœ€å®‰å…¨è™•ç†)
      const token = btoa(`${this.loginData.username}:${this.loginData.password}`);
      const expireAt = Date.now() + (30 * 60 * 1000);
      localStorage.setItem("basic_token", token);
      localStorage.setItem("expire_at", expireAt);
      this.isLoggedIn = true;
      alert("ç™»å…¥æˆåŠŸï¼ˆç¤ºç¯„ï¼‰");
    },
    logout() {
      if (confirm("ç¢ºå®šè¦ç™»å‡ºï¼Ÿ")) {
        localStorage.removeItem("basic_token");
        localStorage.removeItem("expire_at");
        this.isLoggedIn = false;
      }
    }
  }
}).mount('#app');
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="js/cache-busting.js"></script>
</body>
</html>